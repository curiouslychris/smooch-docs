<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>SupportKit Documentation</title>

    <link href="../images/favicon.ico" rel="icon" type="image/ico" />
    <link href="../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="../javascripts/all.js" type="text/javascript"></script>

    <script src="//use.typekit.net/wdu7dsf.js"></script>
    <script>try{Typekit.load();}catch(e){}</script>
  </head>

  <body class="android android_index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="../images/logo.png" />
      <div class="separator separator-top"></div>
      <div class="platform-nav">
        <div class="nav-label">Platform</div>
        <div class="platform-selector btn-group">
          <button class="btn btn-default" data-platform-name="ios">iOS</button>
          <button class="btn btn-default" data-platform-name="android">Android</button>
          <button class="btn btn-default" data-platform-name="web">Web</button>
        </div>
        <div class="clear"></div>
      </div>
      <div class="separator"></div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://www.supportkit.io'>Sign up for SupportKit, it's free</a></li>
            <li><a href='/api/android'>Class Reference</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id='welcome'>Welcome</h1>
<p>SupportKit adds beautifully simple messaging to your app to keep your users engaged and coming back. If you want to learn more about SupportKit, then visit our website at <a href="http://www.supportkit.io">http://www.supportkit.io</a> or <a href="https://app.supportkit.io">sign up here</a>. This page provides in-depth documentation on SupportKit&rsquo;s features and is meant to be a guide for developers integrating the SDK and app makers seeking to engage with their users.</p>

<p>Source code examples are provided for all of our SDKs, including both Objective-C and Swift for iOS. You can view code examples inline, and you can switch the programming language of the examples with the tabs in the top left.</p>

<p>For more in-depth details on SupportKit&rsquo;s api check out our <a href="http://docs.supportkit.io/api">API reference</a>. The API reference documents every method and property available through SupportKit. If you have any other questions, feel free to reach out to us <a href="mailto:help@supportkit.io">here</a>.</p>

          <h1 id='adding-supportkit-to-your-app'>Adding SupportKit to your app</h1>
<p>There are a few ways you can include the SupportKit plugin on your Android project.</p>

<p>The SupportKit library comes in both the AAR and JAR packages. The AAR package is the preferred one but if you are not using Android Studio, you will need to install the JAR.</p>
<h2 id='android-studio-with-gradle'>Android Studio with Gradle</h2>
<p><span class="badge"><a href="https://bintray.com/supportkitorg/maven/supportkit/_latestVersion"><img alt="Bintray" src="https://api.bintray.com/packages/supportkitorg/maven/supportkit/images/download.svg" /></a></span></p>

<p>The SupportKit library is hosted on <a href="https://bintray.com/supportkitorg/maven/supportkit">Bintray</a> and is available on <a href="http://jcenter.bintray.com/io/supportkit/">JCenter</a>. You can add the dependencies right into your <code class="prettyprint">build.grade</code> file.</p>
<pre class="highlight plaintext"><code>compile 'com.google.code.gson:gson:2.3.1'
compile 'com.squareup.okhttp:okhttp:2.4.0'
compile 'io.supportkit:core:latest.release'
compile 'io.supportkit:ui:latest.release'
</code></pre>

<p><aside class="notice">
SupportKit depends on a few external libraries that many applications already feature. For this reason, it does not bundle those dependencies inside the AAR or JAR packages.
</aside></p>
<h2 id='eclipse-netbeans-and-the-ant-build-system'>Eclipse, Netbeans and the ant build system</h2><h3 id='core-module-only'>Core module only</h3>
<ul>
<li>In your project directory, create a subdirectory called <strong>libs</strong> if it does not already exist</li>
<li>Copy <strong>SupportKit-core.jar</strong> into the <strong>libs</strong> directory</li>
<li>Add these permissions in <strong>AndroidManifest.xml</strong>:
<code class="prettyprint">xml
&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;
</code></li>
<li>Add this service in <strong>AndroidManifest.xml</strong>:
<code class="prettyprint">xml
&lt;service android:name=&quot;io.supportkit.core.service.SupportKitService&quot;/&gt;
</code></li>
<li>Download and copy each dependency JAR into the <strong>libs</strong> subdirectory:

<ul>
<li><a href="https://code.google.com/p/google-gson/">Google-Gson</a></li>
<li><a href="https://square.github.io/okhttp/">OkHttp and Okio</a></li>
</ul></li>
</ul>
<h3 id='core-and-ui-modules'>Core and UI modules</h3>
<ul>
<li>Download the <code class="prettyprint">supportkit-eclipse-MAJ.MIN.PATCH.zip</code> file from <a href="https://bintray.com/supportkitorg/maven/supportkit">Bintray</a>.</li>
<li>Extract the zip and copy the <code class="prettyprint">appcompat</code> and <code class="prettyprint">supportkit</code> folders in the root of your project.</li>
<li>In Eclipse, import both folders in your workspace. After this step you should have two new projects added to your workspace named <code class="prettyprint">android-support-v7-appcompat</code> and <code class="prettyprint">ConversationActivity</code>.</li>
<li>Expand the <code class="prettyprint">android-support-v7-appcompat\libs</code> folder. Then on each lib, do <code class="prettyprint">right-click</code> &gt; <code class="prettyprint">Build Path</code> &gt; <code class="prettyprint">Add to Build Path</code>.</li>
<li>Go to the properties of your project (i.e. <code class="prettyprint">right-click</code> &gt; <code class="prettyprint">Properties</code>). Then under the Android item, add a reference to the SupportKit <code class="prettyprint">ConversationActivity</code>.</li>
<li>Add these permissions in <strong>AndroidManifest.xml</strong>:</li>
</ul>
<pre class="highlight xml"><code><span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.ACCESS_NETWORK_STATE"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.INTERNET"</span><span class="nt">/&gt;</span>
</code></pre>

<ul>
<li>Add this service in <strong>AndroidManifest.xml</strong>:</li>
</ul>
<pre class="highlight xml"><code><span class="nt">&lt;service</span> <span class="na">android:name=</span><span class="s">"io.supportkit.core.service.SupportKitService"</span><span class="nt">/&gt;</span>
</code></pre>

<ul>
<li>Add this activity in <strong>AndroidManifest.xml</strong>:</li>
</ul>
<pre class="highlight xml"><code><span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">"io.supportkit.ui.ConversationActivity"</span> <span class="na">android:theme=</span><span class="s">"@style/Theme.AppCompat.Light"</span> <span class="nt">/&gt;</span>
</code></pre>
<h4 id='troubleshooting'>Troubleshooting</h4>
<p>If you get the following error when running your application</p>
<pre class="highlight plaintext"><code>[2015-07-23 09:33:42 - Dex Loader] Unable to execute dex: Multiple dex files define Lio/supportkit/ui/BuildConfig;
[2015-07-23 09:33:42 - MainActivity] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lio/supportkit/ui/BuildConfig;
</code></pre>

<p>The fix is:</p>

<ul>
<li>Eclipse project properties &gt; <code class="prettyprint">Java build path</code> &gt; <code class="prettyprint">Order and export</code></li>
<li>Uncheck Android private libraries.</li>
</ul>

<p>See <a href="http://stackoverflow.com/a/26856255/213272">http://stackoverflow.com/a/26856255/213272</a>.</p>
<h2 id='initialize-supportkit-in-your-app'>Initialize SupportKit in your app</h2>
<p>After following the steps above, your app is setup for working with the SupportKit SDK. Before your code can invoke its functionality, you&rsquo;ll have to initialize the library using your app&rsquo;s token.</p>

<p>This token is free and uniquely identifies your app and links it to the SupportKit backend that does the heavy lifting necessary to bridge the gap between you and your users.</p>

<p>You can find your token by <a href="https://app.supportkit.io">logging into SupportKit</a> and copying it from the settings page as shown below.</p>

<p><img alt="App Token on Overview Page" src="../images/apptoken.png" /></p>

<p>Once you&rsquo;ve located your token, use the code below to initialize SupportKit.</p>

<p>Add the following line of code to your <code class="prettyprint">onCreate</code> method:</p>
<pre class="highlight java"><code><span class="kn">import</span> <span class="nn">io.supportkit.core.SupportKit</span><span class="o">;</span>
<span class="o">...</span>
<span class="n">SupportKit</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">"YOUR_APP_TOKEN"</span><span class="o">);</span>
</code></pre>

<p>Make sure to replace <code class="prettyprint">YOUR_APP_TOKEN</code> with your app token.</p>
<h3 id='displaying-the-supportkit-user-interface'>Displaying the SupportKit User Interface</h3>
<p>Once you&rsquo;ve initialized SupportKit, you&rsquo;re ready to try it out. </p>

<p>Find a suitable place in your app&rsquo;s interface to invoke SupportKit and use the code below to display the SupportKit user interface. You can bring up SupportKit whenever you think that your user will need access to help or a communication channel to contact you.</p>
<pre class="highlight java"><code><span class="kn">import</span> <span class="nn">io.supportkit.ui.ConversationActivity</span><span class="o">;</span>
<span class="o">...</span>
<span class="n">ConversationActivity</span><span class="o">.</span><span class="na">show</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
</code></pre>

          <h1 id='slack'>Slack</h1>
<p>Slack is a new communication tool that combines the best things about chat, email and the web to group all of your team&rsquo;s conversations and workflow into one beautiful, searchable place.</p>

<p>SupportKit has a revolutionary new Slack integration that allows your team to effortlessly speak to your app&rsquo;s users, without leaving Slack. Check out this video to see how it works:</p>

<iframe style="margin-left:42px;" src="//player.vimeo.com/video/117524819?color=a02b8f&amp;byline=0&amp;portrait=0" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
<h2 id='configuring-slack'>Configuring Slack</h2><h3 id='step-1--quotauthorizifyquot-supportkit-so-that-it-can-talk-to-your-slack'>Step 1. &ldquo;Authorizify&rdquo; SupportKit so that it can talk to your Slack</h3><h3 id='step-2--set-up-a-new-quotslash-commandquot-so-that-you-can-send-messages-to-supportkit'>Step 2. Set up a new &ldquo;slash command&rdquo; so that you can send messages to SupportKit</h3>
<p><img src="/images/slashcmd.png" alt="Slash Command Setup"/></p>

<p><aside class="notice">
Make sure you remember to fill in the &ldquo;Token&rdquo; field of the form in Step 2 with the token that Slack&rsquo;s slash command setup page provides you.
</aside></p>
<h3 id='step-3--choose-a-quotdispatch-channelquot-to-receive-new-message-notifications-from-your-app39s-users'>Step 3. Choose a &ldquo;dispatch channel&rdquo; to receive new message notifications from your app&rsquo;s users</h3>
<p>Once you&rsquo;ve completed these 3 steps, you&rsquo;re ready to start speaking to your users with Slack. For more information on how to do this, read the <a href="#slack-channel">conversations</a> section</p>

          <h1 id='help-scout'>Help Scout</h1>
<p><a href="http://www.helpscout.net/">Help Scout</a> is a scalable, elegant and intuitive help desk solution. By connecting SupportKit to Help Scout, you can manage in-app conversations you have with your users directly from Help Scout. This way, you can use the same system to handle your team&rsquo;s e-mail and in-app support channels. Unlike other Help Scout conversations, agent replies in conversations initiated by SupportKit app users won&rsquo;t be sent by email, instead they will appear directly in the app.</p>
<h2 id='configuring-help-scout-to-work-with-supportkit'>Configuring Help Scout to work with SupportKit</h2>
<p>Configuring Help Scout is super easy. All you have to do is copy/paste a Help Scout API key into our integration page.</p>

<ol>
<li><p>Log in to your Help Scout account, go to &ldquo;Your Profile&rdquo; -&gt; &ldquo;API Keys&rdquo; and generate an API key. </p></li>
<li><p>On the Help Scout page in your SupportKit admin, paste the API key into the field that says &ldquo;Paste API Key here.&rdquo;</p></li>
<li><p>Now, pick the mailbox you want to recieve app user messages in, and next time one of your users messages you using SupportKit, the conversation will appear in the Help Scout mailbox.</p></li>
</ol>

<p><img style="width:50%; min-width:400px; max-width:800px;" src="/images/helpscout_settings.png" alt="Configure Help Scout integration page"></p>
<h2 id='instant-messaging-from-a-help-scout-mailbox'>Instant messaging from a Help Scout mailbox</h2>
<p>You can change or delete the Help Scout mailbox that SupportKit sends messages to, but you should note that conversations will not automatically migrate to the new mailbox. You must move the conversations you wish to have in the new mailbox via the Help Scout UI. Otherwise they will continue in the previously configured mailbox. Update your settings before deleting a Help Scout mailbox. If the mailbox configured on SupportKit no longer exists, messages will be lost.</p>

          <h1 id='zendesk'>Zendesk</h1>
<p>Zendesk is a CRM platform specialized in managing support tickets. Our Zendesk integration combines all the advantages of in-app messaging with a powerful CRM back-end.</p>
<h2 id='configuring-zendesk-ticketing'>Configuring Zendesk ticketing</h2>
<p>Configuring SupportKit to communicate with Zendesk is easy. Go to your app settings on the SupportKit admin page, and in the Zendesk settings, enter your Zendesk subdomain and click on the authenticate button.</p>

<p><img style="width:50%; min-width:400px; max-width:800px;" src="/images/zendesk_integration.png" alt="Configure Zendesk integration page"/></p>

<p>In order to maintain all your interactions with an app user under a single Zendesk End-user profile, it&rsquo;s important to <a href="#identifying-your-users">set the email</a> of your user in your app&rsquo;s SupportKit integration.</p>
<h3 id='configuring-agent-images'>Configuring agent images</h3>
<p>You can set an agent&rsquo;s image in your app (as pictured below) by creating a <a href="http://www.gravatar.com/">Gravatar</a> image associated with the agent&rsquo;s email address.
<img style="width:50%; min-width:200px; max-width:400px;" src="/images/agent_thumb.png" alt="Set agent images"/></p>
<h3 id='working-with-zendesk-email-signatures'>Working with Zendesk email signatures</h3>
<p>SupportKit automagically removes agent&rsquo;s personal signatures from messages. Global signatures can be set, but must be prefixed with <code class="prettyprint">--</code>, if they aren’t, you’ll see them appear in SK message bubbles, and it can be unsightly.
<img style="width:50%; min-width:200px; max-width:400px;" src="/images/unsightly_signature.png" alt="Oops, how unsightly"/></p>
<h3 id='optional-additional-information-on-configuration'>Optional additional information on Configuration</h3>
<p>Once you are authenticated with your Zendesk app, SupportKit will automatically configure targets and triggers so that your Zendesk agents can communicate with your SupportKit app users.</p>

<p>During the configuration process any existing triggers in your Zendesk settings will be modified to not email the End-user if the ticket is tagged &ldquo;supportkit&rdquo;. We do this to avoid duplicating the conversation, and to remove any reason for the app user to leave your app to respond via email.</p>

<p>It&rsquo;s suggested that you don&rsquo;t modify the targets and triggers that SupportKit configures for you on Zendesk. However, if you do, and anything ever goes wrong, it&rsquo;s easy to fix. Just return to your app settings on the SupportKit admin page and in the Zendesk settings click &ldquo;Remove Integration.&rdquo; Re-adding the integration will remove previously configured SupportKit targets and triggers and refresh your configuration.</p>

<p>Note: SupportKit only ever configures one target and trigger per a Zendesk subdomain. In the event that multiple apps, or even mutliple SupportKit accounts are authorized for a Zendesk subdomain, the triggers and targets will not be removed until all SupportKit apps have had the Zendesk integration removed.</p>
<h2 id='rate-limiting'>Rate Limiting</h2>
<p>Zendesk limits each account to 200 requests per a minute (globally). Additionally, they only allow 15 comments to be made on each individual ticket (regardless of whether the comment is an agent or app user) within a 10 minute period.</p>

<p>In the unlikely event that a conversation surpasses the rate limit, the agent will recieve a message in the Zendesk UI saying as much, and preventing the ticket from being updated for a certain period of time, usually around 6 minutes. Your app user&rsquo;s messages will be queued up and sent after the time period specified by Zendesk.</p>

<p>To reduce the likelihood of you bumping up against the rate limit, SupportKit batches together all messages sent from the app user within a 5 second period into a single comment.</p>

          <h1 id='conversations'>Conversations</h1>
<p>SupportKit allows your users to have conversations with you through an interface that&rsquo;s as easy and intuitive as text messaging. The messages users send from your app arrive to you either as a Slack message or as a thread in your e-mail inbox so that you can manage them using your favourite web, desktop or mobile client. If you choose to send messages to an e-mail inbox, you can send them to <a href="#connecting-to-your-crm">your favourite CRM as well</a>.</p>

          <h2 id='how-do-conversations-work'>How do conversations work?</h2>
<p>When users access SupportKit by clicking the expandable messaging tab, they’ll be presented with SupportKit’s messaging interface.</p>

<p><img src="/images/browser_messages.png" alt="Drawing" style="width: 75%;"/></p>

          <h3 id='slack-channel'>Slack Channel</h3>
<p>Once your user types a message and hits send, SupportKit sends the message to Slack. If it&rsquo;s a new conversation, a notification will appear in the dispatch channel that you chose when you <a href="#configuring-slack">configured Slack</a>.</p>

<p>This notification contains a link to a channel associated to the specific user that sent you the message. From this channel you can get more information on the user and reply to their questions.</p>

<p>The messages you send in this channel are not automatically sent to your user. We do this so that you can invite teammates to read and collaborate on the user&rsquo;s issue, without exposing your internal conversation.</p>

<p>When you&rsquo;re ready to send a message to the user, simply use SupportKit&rsquo;s slash command:</p>
<pre class="highlight plaintext"><code>/sk TYPE YOUR MESSAGE HERE
</code></pre>

<p>This command will make SupportKit send your message directly to the app user. You&rsquo;ll get a notification in the channel confirming that the transmission was successful.</p>

<p>If you want to consult any metadata you&rsquo;ve associated with the user in order to aid the help process, simply use the command below to instruct SupportKit to display the most up to date metadata on a user.</p>
<pre class="highlight plaintext"><code>/sk !profile
</code></pre>

<p>To learn more about how to associate data to a user, read our <a href="#identifying-your-users">documentation on the subject</a>.</p>
<h3 id='e-mail-channel'>E-Mail Channel</h3>
<p>Once your user types a message and hits send, SupportKit transforms the message into an e-mail that makes its way to the e-mail address you specified when signing up for SupportKit. This e-mail contains the user&rsquo;s message as well as any metadata about the user that you&rsquo;ve captured in your app. </p>

<p><img src="/images/email_with_context.png" alt="Drawing" style="width: 80%;"/></p>

          <h2 id='identifying-your-users'>Identifying your users</h2>
<p>SupportKit allows you to associate metadata to your users so that you can better understand the context around a user&rsquo;s message. </p>
<h3 id='naming-the-current-user'>Naming the current user</h3>
<p>By default, e-mail from SupportKit will be sent from a sender named Anonymous. SupportKit lets you easilly identify who you are speaking with.</p>

          <p>You can set the sender&rsquo;s properties by initializing SupportKit with a user object.</p>
<pre class="highlight javascript"><code><span class="nx">SupportKit</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
    <span class="na">appToken</span><span class="p">:</span> <span class="s1">'your_app_token'</span><span class="p">,</span>
    <span class="na">givenName</span><span class="p">:</span> <span class="s1">'Doctor'</span><span class="p">,</span>
    <span class="na">surname</span><span class="p">:</span> <span class="s1">'Who?'</span><span class="p">,</span>
    <span class="na">email</span><span class="p">:</span> <span class="s1">'the-doctor@supportkit.io'</span><span class="p">,</span>
    <span class="na">properties</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">'customProp'</span><span class="p">:</span> <span class="s1">'whatever you please'</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre>

<p>You can specify any user property you need, and they&rsquo;re all optional. So the object you pass into init could also look as simple as
<code class="prettyprint">
{appToken: &quot;your_app_token&quot;, givenName: &quot;Trogdor&quot;}
</code></p>

          <p><aside class="info">
Note: The maximum size for a property key is 100 bytes and the maximum property string value is 800 bytes. User keys and string values that exceed these limits will be truncated.
</aside></p>

          <h2 id='getting-help-from-your-team'>Getting help from your team</h2>
<p>If you want multiple team members to respond to your SupportKit requests, you can specify multiple email addresses, or use a mailing list. Whenever a team member replies, the incoming email address and associated name will be used to determine the team member displayed to the user alongside the message.</p>

          <p><img alt="Team Member Names" src="../images/browser_team.png" /></p>

          <h2 id='keeping-your-users-safe'>Keeping your users safe</h2>
<p>SupportKit sends messages using standard encryption protocols, but in order to keep your users completely safe, the best way is to inform your users they should never send sensitive data through SupportKit messages, for example: credit card numbers, passwords, sensitive documents, and private photos.</p>

          <h1 id='connecting-to-your-crm'>Connecting to your CRM</h1>
<p>SupportKit&rsquo;s been designed to fit into your existing workflow so you can focus on speaking to your users and take advantage of whatever medium makes you most effective.</p>

<p>In addition to deep integration with <a href="#zendesk">Zendesk</a>, since SupportKit uses e-mail to manage its communication, it&rsquo;s easy to use your favourite CRM to manage incoming conversations as tickets if you want to benefit from the additional tools this allows.</p>

<ol>
<li><p>Take note of the e-mail address that the CRM uses to receive new support requests.</p></li>
<li><p>Set SupportKit&rsquo;s forwarding address to the address you noted in step 1. </p></li>
<li><p>Turn off any kind of signatures or annotations in your CRM to ensure that users receive a concise chat bubble when you reply.</p></li>
</ol>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
